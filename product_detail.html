<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Name // LazyBees</title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://kit.fontawesome.com/11f75f157a.js" crossorigin="anonymous"></script>
    <link rel="icon" type="image/x-icon" href="img/logo-removebg-preview.png">
    <!-- CSS -->
    <link rel="stylesheet" href="css/product_detail.css">
    <link rel="stylesheet" href="css/show-hide.css">
    <link rel="stylesheet" href="css/style.css">
    
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
</head>

<body>
    <header>
        <a href="index.html">
            <h2 class="logo"><img src="img/logo-removebg-preview.png" alt=""></h2>
        </a>
        <nav class="navigation">
            <a href="explore.html">Explore</a>
            <a href="feed.html">Feed</a>
            <a href="collectionstats.html">Charts</a>
        </nav>

        <div class="search-box">
            <form action="">
                <input name="search" id="srch" placeholder="Search for music...">
                <button type="submit"><i class="fa fa-search"></i></button>
            </form>
        </div>

        <div class="d-flex">
            <button class="btnLogin-popup" style="position: relative;">
                <p>
                    <i class='bx bx-wallet'></i>
                </p>

                <span>Connect Wallet</span>
            </button>
            <div id="otherButton" class="hide">
                <div class="After-logging-in">
                    <a href="Profile.html"><img src="img/NFT-1.jpg" alt=""><span>Name</span></a>
                    <p>13 SOL</p>
                </div>
            </div>

            <div id="cd-cart-trigger" class="shopping"><a class="cd-img-replace" href="#0">
                    <i class='bx bx-cart'></i></a>
            </div>
        </div>
    </header>

    <div id="cd-shadow-layer"></div>

    <div id="cd-cart">
        <div class="cart-header">
            <p>Your Cart <i class='bx bx-info-circle'></i></p>
            <span>Clear all (3 items)</span>
        </div>

        <ul class="cd-cart-items">
            <li>
                <div class="d-flex">
                    <img src="img/1.jpg" height="65px" width="auto">
                    <div>
                        <span class="cd-qty">At My Worst (Standard Edition)</span> #2002
                        <div class="cd-price">Pink Sweats</div>
                        <div class="cd-des">This is one of a ...</div>
                    </div>
                    <div class="cd-price cd-item-price cd-img-replace">0.005 SOL</div>
                    <a href="#0" class="cd-item-remove cd-img-replace"><i class='bx bx-trash'></i></a>
                </div>

            </li>

            <li>
                <div class="d-flex">
                    <img src="img/1.jpg" height="65px" width="auto">
                    <div>
                        <span class="cd-qty">At My Worst (Standard Edition)</span> #2003
                        <div class="cd-price">Pink Sweats</div>
                        <div class="cd-des">This is one of a ...</div>
                    </div>
                    <div class="cd-price cd-item-price cd-img-replace">0.005 SOL</div>
                    <a href="#0" class="cd-item-remove cd-img-replace"><i class='bx bx-trash'></i></a>
                </div>
            </li>

            <li>
                <div class="d-flex">
                    <img src="img/1.jpg" height="65px" width="auto">
                    <div>
                        <span class="cd-qty">At My Worst <b class="special-edition">(Limited Edition)</b></span> #1
                        <div class="cd-price">Pink Sweats</div>
                        <div class="cd-des">This is one of a ...</div>
                    </div>
                    <div class="cd-price cd-item-price cd-img-replace">0.0221 SOL</div>
                    <a href="#0" class="cd-item-remove cd-img-replace"><i class='bx bx-trash'></i></a>
                </div>
            </li>
        </ul> <!-- cd-cart-items -->

        <div class="cd-cart-total d-flex" style="justify-content: space-between;">
            <p>Total:</p>
            <div class="d-flex justify-content-center" style="flex-direction: column;">
                <span>0.00321 SOL</span>
                <span class="cd-des">~= 0.20 USD</span>
            </div>
        </div> <!-- cd-cart-total -->

        <a href="#0" class="checkout-btn">Purchase</a>

    </div> <!-- cd-cart -->

    <div class="wrapper">
        <span class="icon-close">
            <i class="fa-solid fa-xmark"></i>
        </span>
        <div class="form-box login">
            <h2 class="shadow">CONNECT YOUR WALLET</h2>
            <form action="#">
                <a href="" onclick="connectWallet()"><img src="img/Phantom-Icon_App_128x128.png" alt=""> <span>Phantom
                        Wallet</span></a>
                <a href=""><img src="https://iconic.dynamic-static-assets.com/icons/sprite.svg#walletconnect" alt="">
                    <span>WalletConnect</span></a>
                <a href=""><img src="img/Glow_Icon.png" alt=""> <span>Glow</span></a>
                <a href=""><img src="img/soflare_Icon.png" alt=""> <span>Solflare</span></a>
                <a href=""><img src="https://iconic.dynamic-static-assets.com/icons/sprite.svg#metamask" alt="">
                    <span>MetaMask</span></a>
                <a href=""><img src="https://iconic.dynamic-static-assets.com/icons/sprite.svg#coinbase" alt="">
                    <span>Coinbase Wallet</span></a>

                <button class="Show">Show More</button>
            </form>
        </div>
    </div>
    <tbody>
        <section id="body-detail-item1" class="product-detail">
            <div class="product-detail-box">

                <div class="product-left">
                    <div class="cart-product">
                        <img src="img/3.jpg" alt="">
                        <div class="inter-img-time">
                            <i class='bx bx-play'></i>
                            <p class="time-start">0.00 <span>/</span></p>
                            <p class="time-end">0.00</p>
                        </div>
                        <div class="inter-img">
                            <div class="bar3">
                                <input type="range" id="seek1" min="0" value="0" max="100">
                                <div class="bar4" id="bar4"></div>
                                <div class="dot4"></div>
                            </div>
                            <div class="icon-title-bar">
                                <i class='bx bx-volume-mute' style='color:#ffffff'></i>
                                <i class='bx bx-fullscreen' style='color:#ffffff'></i>
                                <i class='bx bx-dots-horizontal-rounded' style='color:#ffffff'></i>
                            </div>
                        </div>
                        <div class="product-item1">
                            <div class="product-title">
                                <svg width="15px" height="15px" viewBox="0 0 101 88" fill="none"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path
                                        d="M100.48 69.3817L83.8068 86.8015C83.4444 87.1799 83.0058 87.4816 82.5185 87.6878C82.0312 87.894 81.5055 88.0003 80.9743 88H1.93563C1.55849 88 1.18957 87.8926 0.874202 87.6912C0.558829 87.4897 0.31074 87.2029 0.160416 86.8659C0.0100923 86.529 -0.0359181 86.1566 0.0280382 85.7945C0.0919944 85.4324 0.263131 85.0964 0.520422 84.8278L17.2061 67.408C17.5676 67.0306 18.0047 66.7295 18.4904 66.5234C18.9762 66.3172 19.5002 66.2104 20.0301 66.2095H99.0644C99.4415 66.2095 99.8104 66.3169 100.126 66.5183C100.441 66.7198 100.689 67.0067 100.84 67.3436C100.99 67.6806 101.036 68.0529 100.972 68.415C100.908 68.7771 100.737 69.1131 100.48 69.3817ZM83.8068 34.3032C83.4444 33.9248 83.0058 33.6231 82.5185 33.4169C82.0312 33.2108 81.5055 33.1045 80.9743 33.1048H1.93563C1.55849 33.1048 1.18957 33.2121 0.874202 33.4136C0.558829 33.6151 0.31074 33.9019 0.160416 34.2388C0.0100923 34.5758 -0.0359181 34.9482 0.0280382 35.3103C0.0919944 35.6723 0.263131 36.0083 0.520422 36.277L17.2061 53.6968C17.5676 54.0742 18.0047 54.3752 18.4904 54.5814C18.9762 54.7875 19.5002 54.8944 20.0301 54.8952H99.0644C99.4415 54.8952 99.8104 54.7879 100.126 54.5864C100.441 54.3849 100.689 54.0981 100.84 53.7612C100.99 53.4242 101.036 53.0518 100.972 52.6897C100.908 52.3277 100.737 51.9917 100.48 51.723L83.8068 34.3032ZM1.93563 21.7905H80.9743C81.5055 21.7907 82.0312 21.6845 82.5185 21.4783C83.0058 21.2721 83.4444 20.9704 83.8068 20.592L100.48 3.17219C100.737 2.90357 100.908 2.56758 100.972 2.2055C101.036 1.84342 100.99 1.47103 100.84 1.13408C100.689 0.79713 100.441 0.510296 100.126 0.308823C99.8104 0.107349 99.4415 1.24074e-05 99.0644 0L20.0301 0C19.5002 0.000878397 18.9762 0.107699 18.4904 0.313848C18.0047 0.519998 17.5676 0.821087 17.2061 1.19848L0.524723 18.6183C0.267681 18.8866 0.0966198 19.2223 0.0325185 19.5839C-0.0315829 19.9456 0.0140624 20.3177 0.163856 20.6545C0.31365 20.9913 0.561081 21.2781 0.875804 21.4799C1.19053 21.6817 1.55886 21.7896 1.93563 21.7905Z"
                                        fill="url(#paint0_linear_174_4403)" />
                                    <defs>
                                        <linearGradient id="paint0_linear_174_4403" x1="8.52558" y1="90.0973"
                                            x2="88.9933" y2="-3.01622" gradientUnits="userSpaceOnUse">
                                            <stop offset="0.08" stop-color="#00000" />
                                            <stop offset="0.5" stop-color="#00000" />
                                            <stop offset="0.6" stop-color="#00000" />
                                            <stop offset="0.72" stop-color="#00000" />
                                            <stop offset="0.97" stop-color="#00000" />
                                        </linearGradient>
                                    </defs>
                                </svg>
                                <span>
                                    <p class="product-detail-coin">Chain:</p>
                                    <p class="product-coin">SOL</p>
                                </span>
                            </div>
                            <div class="product-link">
                                <a href="#"><i class="fa-solid fa-arrow-up-right-from-square share"></i></a>
                                <a href="#"><button><i class='bx bx-heart'></i></button></a>
                            </div>
                        </div>
                    </div>

                    <div class="detail-id">
                        <div class="detail-id-box">
                            <h4> <i class="fa-solid fa-circle-info"></i> Details</h4>
                            <div class="contract">
                                <h3>Contract Address</h3>
                                <p> 0x37a0...6535 </p>
                            </div>
                            <div>
                                <h3>Token ID</h3>
                                <p> 6805647338418769...</p>
                            </div>
                            <div>
                                <h3>Token Standard </h3>
                                <p> ERC-721</p>
                            </div>
                            <div>
                                <h3>Chain</h3>
                                <p>SOLANA</p>
                            </div>
                            <div>
                                <h3>Creator Earnings</h3>
                                <p>15%</p>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="product-right">
                    <div class="detail-name">
                        <div class="arts-customer">
                            <p>MESTO</p>
                            <h3>Leyla</h3>
                        </div>
                        <div>

                        </div>
                    </div>
                    <div class="product-information">
                        <div class="product-information-title">
                            <span> <i class="fa-regular fa-eye"></i> 288 Views </span>
                            <span> <i class="fa-regular fa-heart"></i> 183 Favorites </span>
                            <span> <i class="fa-solid fa-icons"></i> Music </span>
                        </div>
                        <div class="product-information-sale-time">
                            <span> <i class="fa-regular fa-clock"></i> Sale ends November 1,2023 at 4:35 PM </span>
                            <div class="product-information-inner">
                                <div class="product-information-price">
                                    <p class="Current-price">Current price</p>
                                    <h3>0.15 SOL</h3>
                                    <p class="price-hide">$1,920,30</p>
                                </div>
                                <div class="product-information-buy">
                                    <button class="buy" style="margin-right: 10px;">
                                        <span style="margin-right: 15px;">Buy now</span>
                                        <i class="fa-solid fa-cart-shopping buy-cart"></i>
                                    </button>
                                    <button class="offer">Make offer</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="product-description">
                        <div class="description-title">
                            <h2><i class="fa-solid fa-bars-staggered"></i> Description</h2>

                        </div>
                        <span>By <p>Dany Huy</p></span>
                        <p class="product-description-title1">
                            The Shroud cloud the minds of their enemies,
                            making it near impossible to tell friend from foe.
                        </p>

                    </div>



                </div>
            </div>

        </section>
        <section id="body-detail-item1" class="collection">
            <div class="collection-box">
                <div class="collection-title">
                    <h3>More form this collection</h3>
                </div>
                <div class="collection-product-box">
                    <div class="collection-product">
                        <img src="img/banner3.jpg" alt="">
                        <div class="collection-product-price">
                            <h4>Nuxros Alpha</h4>
                            <h5>0.15 SOL</h5>
                            <p>Last Sale: 0.11 SOL</p>
                        </div>
                        <div class="collection-tag">
                            <button>#1234</button>
                        </div>
                    </div>
                    <div class="collection-product">
                        <img src="img/banner1.jpg" alt="">
                        <div class="collection-product-price">
                            <h4>Nuxros Alpha</h4>
                            <h5>0.15 SOL</h5>
                            <p>Last Sale: 0.11 SOL</p>
                        </div>
                        <div class="collection-tag">
                            <button>#1234</button>
                        </div>
                    </div>
                    <div class="collection-product">
                        <img src="img/banner0.jpg" alt="">
                        <div class="collection-product-price">
                            <h4>Nuxros Alpha</h4>
                            <h5>0.15 SOL</h5>
                            <p>Last Sale: 0.11 SOL</p>
                        </div>
                        <div class="collection-tag">
                            <button>#1234</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>


    </tbody>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="img/logo-removebg-preview.png" alt="">
                    <h3>LazyBees</h3>
                    <p>
                        NFT Music Flatform providing solutions for digital buying and exchange
                    </p>
                </div>
                <div class="footer-links">
                    <p>Join the community</p>
                    <div class="links">
                        <a href="https://github.com/siphuc123/NFT_Music_Platforms"><i class='bx bxl-github'></i></a>
                        <a href="https://discord.gg/n3JCcvXK"><i class='bx bxl-discord-alt'></i></a>
                        <a href="https://twitter.com/BeesLazy"><i class='bx bxl-twitter'></i></a>
                        <a href=""><i class='bx bxl-telegram'></i></a>
                    </div>
                </div>
                <div class="footer-social">
                    <h3>Stay in the loot</h3>
                    <p>Join our mailing list to stay in
                        the loop with our newest music releases and
                        newest things about LB.</p>
                    <div class="login-email">
                        <input type="text" placeholder="  Your email address" name="email address">
                        <button style="cursor: pointer;">Sign up</button>
                    </div>

                </div>
                <div class="footer-bottom">

                    <div class="line"> </div>
                    <img src="img/c-removeb.png" alt="">
                    <h4>2023 - LazyBees Team</h4>

                    <div class="private">
                        <p>Privacy Policy</p>
                        <p>Terms of Service</p>
                    </div>

                </div>
            </div>
        </div>
    </footer>
    
    <script src="js/script.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="js/main.js"></script> <!-- Gem jQuery -->
    <script src="js/Profile.js"></script>

    <script defer >
        let publicKey;
        let show;
        //Auto Connect
        (async () => {
            await window.phantom.solana.connect();

        publicKey = window.phantom.solana.publicKey.toBase58();
        console.log(publicKey);
        })();

        //Manual connect 
        const connectWallet = async () =>{
            await window.phantom.solana.connect();

            publicKey = window.phantom.solana.publicKey.toBase58();
            show = window.phantom.solana.connect();
            console.log(publicKey);
            console.log(show);
    
        }

        
        

        //========= [Mint NFT PUBLICKEY] ==========
        const PRIV_KEY = "aeAo1Ko09G0c-YCC"; 

        const toTransaction = (encodedTransaction) => solanaWeb3.Transaction.from(Uint8Array.from(atob(encodedTransaction), c => c.charCodeAt(0)));

        const mintNft = async () => {
            var myHeaders = new Headers();
            myHeaders.append("x-api-key", PRIV_KEY);

            
            const fileInput = document.querySelector("#fileInput");
            
            var formdata = new FormData();
            formdata.append("network", "devnet");
            formdata.append("wallet", publicKey);
            formdata.append("name", "LazyBee NFT");980
            formdata.append("symbol", "LB");
            formdata.append("description", "NFT Music Platform!");
            formdata.append("attributes", '[{"trait_type":"dev power","value":"over 900"}]');
            formdata.append("external_url", "https://shyft.to");
            formdata.append("max_supply", "1");
            formdata.append("royalty", "5");//phần trăm hoa hồng nhận dc mỗi gd
            formdata.append("file", fileInput.files[0]);
            formdata.append("data", fileInput.files[0]);
            formdata.append("nft_receiver", publicKey);
            formdata.append('service_charge', `{ "receiver": "2fmz8SuNVyxEP6QwKQs6LNaT2ATszySPEJdhUDesxktc", "amount": 0.01}`);

            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: formdata,
                redirect: 'follow'
            };

            fetch("https://api.shyft.to/sol/v1/nft/create_detach", requestOptions)
                .then(async response => {
                    let res = await response.json();
                    let transaction = toTransaction(res.result.encoded_transaction);
                    
                    const signedTransaction = await window.phantom.solana.signTransaction(transaction);
                    const connection = new solanaWeb3.Connection("https://api.devnet.solana.com");
                    const signature = await connection.sendRawTransaction(signedTransaction.serialize());

                    console.log("TRANSACTION CONFIRMED!!")
                    
                })
                .catch(error => console.log('error', error));

        }
        //========= [Mint NFT PRIVATE KEY] ==========
        
        const PRIV_KEY_WALLET = "2937Ew3Refg32ibMJvjxeWrA7FYH5HBfuWta7rjaXaJ8CEn8CaCaZ8evPv7QiMN5TaY6BjgzRZN3m7rmV15JKfwk";

        const mintNftPriv = async () => {
            var myHeaders = new Headers();
            myHeaders.append("x-api-key", PRIV_KEY);

            
            const fileInput = document.querySelector("#fileInput");
            
            var formdata = new FormData();
            formdata.append("network", "devnet");
            formdata.append("private_key", PRIV_KEY_WALLET);
            formdata.append("name", "LazyBee NFT");
            formdata.append("symbol", "LB");
            formdata.append("description", "NFT Music Platform!");
            formdata.append("attributes", '[{"trait_type":"dev power","value":"over 900"}]');
            formdata.append("external_url", "https://shyft.to");
            formdata.append("max_supply", "1");
            formdata.append("royalty", "5");//phần trăm hoa hồng nhận dc mỗi gd
            formdata.append("file", fileInput.files[0]);
            formdata.append("data", fileInput.files[0]);
            formdata.append("nft_receiver", publicKey);
            formdata.append('service_charge', `{ "receiver": "2fmz8SuNVyxEP6QwKQs6LNaT2ATszySPEJdhUDesxktc", "amount": 0.01}`);

            var requestOptions = {
                method: 'POST',
                headers: myHeaders,
                body: formdata,
                redirect: 'follow'
            };

            fetch("https://api.shyft.to/sol/v1/nft/create", requestOptions)
                .then(async response => {
                    console.log("TRANSACTION CONFIRMED!!")
                    
                })
                .catch(error => console.log('error', error));

        }  

        //========== [Tranfer Solana] ==========

        const transferSol = async () =>{
            var myHeaders = new Headers();
            myHeaders.append("x-api-key", PRIV_KEY);
            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({
            "network": "devnet",
            "from_address": "78oZPkEVDvpm7DUXHC1ceLPqjazFU4joKzWF3reBWY6",//Người gửi
            "to_address": "6JCJ6HTPvYqkk7WhGPWKec2a3D3GhJo4TtbhdAQQhTJd",//Người nhận
            "amount": 2,
            });

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://api.shyft.to/sol/v1/wallet/send_sol", requestOptions)
            .then(async response => {
                let res = await response.json();
                let transaction = toTransaction(res.result.encoded_transaction);
                    
                await window.phantom.solana.signTransaction(transaction);

                    console.log("TRANSFER SUCCESSFULLY!!")
            })
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        }

        // Thong báo
        function showNotification() {
            let title = "Connect ❤️";
            let icon = 'https://homepages.cae.wisc.edu/~ece533/images/zelda.png'; //this is a large image may take more time to show notifiction, replace with small size icon
            let body = "CONNECT SUCCESSFULLY!!!";

            let notification = new Notification(title, { body, icon });

            notification.onclick = () => {
                    notification.close();
                    window.parent.focus();
            }
        
        }

        const buyNFT = async () => {
            var myHeaders = new Headers();
            myHeaders.append("x-api-key", PRIV_KEY);
            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({
            "network": "devnet",
            "marketplace_address": "5p4Bua5tSsSo1RJ94H1w5DiMSPfWcvMvnMVjPpZ6sJUb",
            "nft_address": "9A75AztajAwN9wTkg1BsC6xDEzC8pgjidtjnURQS5CZy",
            "price": 2,
            "seller_address": "AaYFExyZuMHbJHzjimKyQBAH1yfA9sKTxSzBc6Nr5X4s",
            "buyer_wallet": "GE4kh5FsCDWeJfqLsKx7zC9ijkqKpCuYQxh8FYBiTJe"
            });

            var requestOptions = {
            method: 'POST',
            headers: myHeaders,
            body: raw,
            redirect: 'follow'
            };

            fetch("https://api.shyft.to/sol/v1/marketplace/buy", requestOptions)
            .then(response => response.text())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        }

        
    </script>
</body>

</html>
